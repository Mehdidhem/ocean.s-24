{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { io } from 'socket.io-client';\nimport { ref } from 'vue';\nimport im1 from './/assets/images/i1.png';\nimport im2 from './/assets/images/i2.png';\nimport im3 from './/assets/images/i3.png';\nimport v1 from './/assets/videos/v1.png';\nimport v2 from './/assets/videos/v2.png';\nimport v3 from './/assets/videos/v3.png';\nimport v4 from './/assets/videos/v4.png';\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const socket = io('http://localhost:3010');\n    const input = ref('');\n    const drawer = ref(false);\n    const drawer1 = ref(false);\n    const direction = ref('btt');\n    const images = ref([im1, im2, im3]);\n    const videos = ref([v1, v2, v3, v4]);\n    const messages = ref([]);\n    const fakeUserIP = `${getRandomArbitrary(1, 255)}.${getRandomArbitrary(1, 255)}.${getRandomArbitrary(1, 255)}.${getRandomArbitrary(1, 255)}`;\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      const inputField = document.querySelector(\"#inputmsg\");\n      const chatWindow = document.querySelector(\".chat-window\");\n      const sendButton = document.querySelector(\".chat-send\");\n      const imageButton = document.querySelector(\"#image-button\");\n      const videoButton = document.querySelector(\"#video-button\");\n      inputField.addEventListener(\"focus\", () => {\n        sendButton.style.display = \"block\";\n        imageButton.style.display = \"none\";\n        videoButton.style.display = \"none\";\n      });\n      chatWindow.addEventListener(\"DOMNodeInserted\", e => {\n        if (e.target.parentNode.className == chatWindow.className) {\n          sendButton.style.display = \"none\";\n          imageButton.style.display = \"flex\";\n          videoButton.style.display = \"flex\";\n          window.scrollTo(0, document.body.scrollHeight);\n        }\n      });\n    });\n    function getRandomArbitrary(min, max) {\n      return String(Math.floor(Math.random() * (max - min) + min));\n    }\n    function sendMessage(type, content) {\n      const address = fakeUserIP;\n      if (type === 'text' && input.value.trim()) {\n        const newMessage = {\n          id: Date.now(),\n          type: type,\n          content: input.value,\n          address: address\n        };\n        messages.value.push(newMessage);\n        socket.emit('send message', newMessage);\n        input.value = '';\n      } else if (type === 'image' && content) {\n        const newMessage = {\n          id: Date.now(),\n          type: type,\n          content: content,\n          address: address\n        };\n        messages.value.push(newMessage);\n        socket.emit('send message', newMessage);\n        drawer.value = false;\n      } else if (type === 'video' && content) {\n        const newMessage = {\n          id: Date.now(),\n          type: type,\n          content: content,\n          address: address\n        };\n        messages.value.push(newMessage);\n        socket.emit('send message', newMessage);\n        drawer1.value = false;\n      }\n    }\n    const __returned__ = {\n      socket,\n      input,\n      drawer,\n      drawer1,\n      direction,\n      images,\n      videos,\n      messages,\n      fakeUserIP,\n      getRandomArbitrary,\n      sendMessage,\n      get io() {\n        return io;\n      },\n      ref,\n      get im1() {\n        return im1;\n      },\n      get im2() {\n        return im2;\n      },\n      get im3() {\n        return im3;\n      },\n      get v1() {\n        return v1;\n      },\n      get v2() {\n        return v2;\n      },\n      get v3() {\n        return v3;\n      },\n      get v4() {\n        return v4;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["io","ref","im1","im2","im3","v1","v2","v3","v4","socket","input","drawer","drawer1","direction","images","videos","messages","fakeUserIP","getRandomArbitrary","document","addEventListener","inputField","querySelector","chatWindow","sendButton","imageButton","videoButton","style","display","e","target","parentNode","className","window","scrollTo","body","scrollHeight","min","max","String","Math","floor","random","sendMessage","type","content","address","value","trim","newMessage","id","Date","now","push","emit"],"sources":["C:/Users/JieZHANG/Desktop/ocean.s-24/my-vue3-app/src/pages/user/App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <header>\r\n      <!-- Chat Header -->\r\n      <h1>Green Data</h1>\r\n    </header>\r\n\r\n    <div class=\"chat-window\">\r\n      <!-- Chat messages -->\r\n      <div class=\"chat-window\">\r\n        <div id=\"init-message\" class=\"message\">Salut ! Envoie-moi des messages, photos ou vidéos pour voir le trajet de\r\n          tes données en temps réel !</div>\r\n        <div class=\"message right\" v-for=\"message in messages\" :key=\"message.id\">\r\n          <div v-if=\"message.type === 'text'\">\r\n            {{ message.content }}\r\n          </div>\r\n          <img v-else-if=\"message.type === 'image'\" :src=\"message.content\" alt=\"Sent Image\" />\r\n          <img v-else-if=\"message.type === 'video'\" :src=\"message.content\" alt=\"Sent Video\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"chat-input\">\r\n      <!-- Message Input -->\r\n      <input id=\"inputmsg\" v-model=\"input\" placeholder=\"Écrivez un message…\" />\r\n\r\n      <div class=\"chat-input-buttons\">\r\n        <!-- Image and Video Upload -->\r\n        <button id=\"image-button\" style=\"chat-button\" @click=\"drawer = true\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2em\" height=\"em\" viewBox=\"0 0 256 256\">\r\n            <path fill=\"currentColor\"\r\n              d=\"M224 160V48a16 16 0 0 0-16-16H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16v-48ZM208 48v92.7L179.3 112a16.1 16.1 0 0 0-22.6 0L112 156.7L91.3 136a16.1 16.1 0 0 0-22.6 0L48 156.7V48Zm0 160H48v-28.7l32-32l20.7 20.7a16.1 16.1 0 0 0 22.6 0l44.7-44.7l40 40V208ZM91.5 100.5A11.9 11.9 0 0 1 88 92a12 12 0 0 1 24 0a12 12 0 0 1-12 12a12.3 12.3 0 0 1-8.5-3.5Z\">\r\n            </path>\r\n          </svg>\r\n        </button>\r\n        <button id=\"video-button\" style=\"chat-button\" @click=\"drawer1 = true\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2em\" height=\"2em\" viewBox=\"0 0 256 256\">\r\n            <path fill=\"currentColor\"\r\n              d=\"M244 73.1a7.7 7.7 0 0 0-8 0l-44 25.1V92a40 40 0 0 0-40-40H24A16 16 0 0 0 8 68v96a40 40 0 0 0 40 40h128a16 16 0 0 0 16-16v-30.2l44 25.1a8.3 8.3 0 0 0 4 1.1a8 8 0 0 0 4-1.1a7.8 7.8 0 0 0 4-6.9V80a7.8 7.8 0 0 0-4-6.9ZM176 188H48a24.1 24.1 0 0 1-24-24V68h128a24.1 24.1 0 0 1 24 24v96Zm56-25.8l-40-22.8v-22.8l40-22.8Z\" />\r\n          </svg>\r\n        </button>\r\n\r\n        <el-drawer v-model=\"drawer\" title=\"Envoyer une image\" :direction=\"direction\" size=\"50%\">\r\n          <div class=\"image-list\">\r\n            <img v-for=\"img in images\" :src=\"img\" :key=\"img\" @click=\"sendMessage('image', img)\" class=\"image-item\" />\r\n          </div>\r\n        </el-drawer>\r\n\r\n        <el-drawer v-model=\"drawer1\" title=\"Envoyer une vidéo\" :direction=\"direction\" size=\"50%\">\r\n          <div class=\"image-list\">\r\n            <img v-for=\"v in videos\" :src=\"v\" :key=\"v\" @click=\"sendMessage('video', v)\" class=\"image-item\" />\r\n          </div>\r\n        </el-drawer>\r\n\r\n        <!-- Send Button -->\r\n        <button class=\"chat-send\" @click=\"sendMessage('text', input.value)\"> Envoyer </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { io } from 'socket.io-client'\r\nconst socket = io('http://localhost:3010');\r\nimport { ref } from 'vue';\r\nimport im1 from './/assets/images/i1.png'\r\nimport im2 from './/assets/images/i2.png'\r\nimport im3 from './/assets/images/i3.png'\r\nimport v1 from './/assets/videos/v1.png'\r\nimport v2 from './/assets/videos/v2.png'\r\nimport v3 from './/assets/videos/v3.png'\r\nimport v4 from './/assets/videos/v4.png'\r\n\r\nconst input = ref('')\r\nconst drawer = ref(false)\r\nconst drawer1 = ref(false)\r\nconst direction = ref('btt')\r\nconst images = ref([im1, im2, im3])\r\nconst videos = ref([v1, v2, v3, v4])\r\n\r\nconst messages = ref([]);\r\nconst fakeUserIP = `${getRandomArbitrary(1, 255)}.${getRandomArbitrary(1, 255)}.${getRandomArbitrary(1, 255)}.${getRandomArbitrary(1, 255)}`;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const inputField = document.querySelector(\"#inputmsg\");\r\n  const chatWindow = document.querySelector(\".chat-window\");\r\n  const sendButton = document.querySelector(\".chat-send\");\r\n  const imageButton = document.querySelector(\"#image-button\");\r\n  const videoButton = document.querySelector(\"#video-button\");\r\n\r\n  inputField.addEventListener(\"focus\", () => {\r\n    sendButton.style.display = \"block\";\r\n    imageButton.style.display = \"none\";\r\n    videoButton.style.display = \"none\";\r\n  });\r\n\r\n  chatWindow.addEventListener(\"DOMNodeInserted\", (e) => {\r\n    if (e.target.parentNode.className == chatWindow.className) {\r\n      sendButton.style.display = \"none\";\r\n      imageButton.style.display = \"flex\";\r\n      videoButton.style.display = \"flex\";\r\n      window.scrollTo(0, document.body.scrollHeight);\r\n    }\r\n  });\r\n});\r\n\r\nfunction getRandomArbitrary(min, max) {\r\n  return String(Math.floor(Math.random() * (max - min) + min));\r\n}\r\n\r\nfunction sendMessage(type, content) {\r\n  const address = fakeUserIP;\r\n  if (type === 'text' && input.value.trim()) {\r\n    const newMessage = {\r\n      id: Date.now(),\r\n      type: type,\r\n      content: input.value,\r\n      address: address\r\n    }\r\n    messages.value.push(newMessage)\r\n    socket.emit('send message', newMessage);\r\n    input.value = ''\r\n  } else if (type === 'image' && content) {\r\n    const newMessage = {\r\n      id: Date.now(),\r\n      type: type,\r\n      content: content,\r\n      address: address\r\n    }\r\n    messages.value.push(newMessage)\r\n    socket.emit('send message', newMessage);\r\n    drawer.value = false\r\n  } else if (type === 'video' && content) {\r\n    const newMessage = {\r\n      id: Date.now(),\r\n      type: type,\r\n      content: content,\r\n      address: address\r\n    }\r\n    messages.value.push(newMessage)\r\n    socket.emit('send message', newMessage);\r\n    drawer1.value = false\r\n  }\r\n\r\n}\r\n\r\n</script>\r\n\r\n\r\n<style>\r\n@font-face {\r\n  font-family: Outfit;\r\n  src: url('./assets/fonts/Outfit-VariableFont_wght.ttf');\r\n}\r\n\r\nhtml,\r\nbody {\r\n  margin: 0px;\r\n  padding: 0px;\r\n  font-family: Outfit, sans-serif;\r\n}\r\n\r\n#app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  \r\n}\r\n\r\nh1 {\r\n  position: fixed;\r\n  background-color: #fff;\r\n  width: 100%;\r\n  top: 0px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 4vh 2vh;\r\n  margin: 0px;\r\n  background-color: rgba(255, 255, 255, .9);\r\n  backdrop-filter: blur(4px);\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.chat-window {\r\n  width: 90vw;\r\n  padding-bottom: 4px;\r\n  margin: 6vh auto;\r\n  overflow-y: auto;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n}\r\n\r\n.message {\r\n  max-width: 60%;\r\n  margin: 4px;\r\n  padding: 12px 16px;\r\n  border-radius: 24px 24px 2px 24px;\r\n  background-color: #ebeaea;\r\n  word-wrap: break-word;\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n}\r\n\r\n#init-message {\r\n  border-radius: 24px 24px 24px 2px;\r\n  background-color: #9747ff;\r\n  color: white;\r\n  align-self: flex-start;\r\n}\r\n\r\n.chat-input {\r\n  padding: 2vh 2vh 4vh 2vh;\r\n  display: flex;\r\n  gap: 16px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: fixed;\r\n  bottom: 0px;\r\n  width: calc(100% - 2vh - 16px);\r\n  background-color: #fff;\r\n}\r\n\r\n.chat-input-buttons {\r\n  display: flex;\r\n}\r\n\r\n.chat-button {\r\n  display: block;\r\n}\r\n\r\n.chat-send {\r\n  display: none;\r\n  width: fit-content;\r\n  font-family: \"Outfit\";\r\n  font-weight: 700;\r\n  color: #4600a2;\r\n}\r\n\r\nbutton {\r\n  background-color: transparent;\r\n  border: none;\r\n  height: 48px;\r\n  width: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .75;\r\n}\r\n\r\n.image-list {\r\n  display: flex;\r\n  height: fit-content;\r\n  overflow-x: scroll;\r\n}\r\n\r\n.image-item {\r\n  height: 200px;\r\n  margin: 16px;\r\n  cursor: pointer;\r\n}\r\n\r\ninput {\r\n  border-radius: 100px;\r\n  padding: 16px 18px;\r\n  border: none;\r\n  background-color: #ebeaea;\r\n  color: #000000;\r\n  width: 100%;\r\n  font-family: Outfit;\r\n  font-size: 1rem;\r\n}\r\n\r\nimg {\r\n  border-radius: 16px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}